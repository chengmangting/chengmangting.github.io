(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{351:function(t,s,n){"use strict";n.r(s);var a=n(43),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h2",{attrs:{id:"关于ajax的写法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#关于ajax的写法"}},[t._v("#")]),t._v(" 关于Ajax的写法")]),t._v(" "),n("p",[n("strong",[t._v('Ajax 即“Asynchronous Javascript And XML " (异步JavaScript 和 XML ），能够在无需重新加载整个网页的情况下，更新部分网页（异步更新）。')])]),t._v(" "),n("ul",[n("li",[t._v("jq请求Ajax")])]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("类型")]),t._v(" "),n("th",[t._v("内容")]),t._v(" "),n("th",[t._v("类别")]),t._v(" "),n("th",[t._v("解释")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("url")]),t._v(" "),n("td",[t._v("地址")]),t._v(" "),n("td",[t._v("相对地址/绝对地址")]),t._v(" "),n("td",[t._v("例子： url: 'http://jingdong.index.json'、url: '/request/ajaxtest'、url: 'request/ajaxtest'")])]),t._v(" "),n("tr",[n("td",[t._v("dataType")]),t._v(" "),n("td",[t._v("数据类型")]),t._v(" "),n("td",[t._v("json")]),t._v(" "),n("td",[t._v("一般都是json数据类型")])]),t._v(" "),n("tr",[n("td",[t._v("type")]),t._v(" "),n("td",[t._v("请求类型")]),t._v(" "),n("td",[t._v("GET/POST")]),t._v(" "),n("td",[t._v("GET请求在地址栏中有显示你的请求信息；POST请求不会，所以POST请求安全性比较高，当你要发送账号和密码时，最好使用POST请求；")])]),t._v(" "),n("tr",[n("td",[t._v("timeout")]),t._v(" "),n("td",[t._v("超时")]),t._v(" "),n("td",[t._v("number")]),t._v(" "),n("td",[t._v("当发送请求超过number秒后，还没接受到信息就报错error")])])])]),t._v(" "),n("p",[n("em",[t._v("注：请求回来的数据是json格式的，需要将数据转成js对象格式才能被浏览器所识别，所以要调用JSON.parse(data)函数")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("$.ajax({\n\t\t\t\turl:'3.query.php',//地址\n\t\t\t\tdataType:'json',//数据类型\n\t\t\t\ttype:'GET',//类型\n\t\t\t\ttimeout:2000,//超时\n\n\t\t\t\t//请求成功\n\t\t\t\tsuccess:function(data,status){\n\t\t\t\tvar res = data;\n\t\t\t\t\t//alert(data);\n\t\t\t\t\t res = JSON.parse(res);\t//解析数据\n\t\t\t\t\t//alert(status);\n\t\t\t\t},\n\t\t\t\t//失败/超时\n\t\t\t\terror:function(XMLHttpRequest,textStatus,errorThrown){\n\t\t\t\t\tif(textStatus==='timeout'){\n\t\t\t\t\t\talert('請求超時');\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\talert('重新请求');\n\t\t\t\t\t\t},2000);\n\t\t\t\t\t}\n\t\t\t\t\t//alert(errorThrown);\n\t\t\t\t}\n\t\t\t})\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br")])]),n("ul",[n("li",[t._v("原生js封装Ajax"),n("br"),t._v(" "),n("strong",[t._v("onreadystatachange：存储函数，每当readyStata属性改变时，就会调用该函数。\nreadyStata：有XMLHttpRequest的状态（0到4）\n0：请求未初始化 "),n("br"),t._v("1：服务器连接已建立 "),n("br"),t._v("2：请求已接收"),n("br"),t._v(" 3：请求处理中 "),n("br"),t._v("4：请求已完成，响应已就绪"),n("br"),t._v('\nstatus：200表示"ok",404表示”未找到页面"\nstatus==404，表示找不到网页（no find)'),n("br"),t._v('\n使用post提交时，要设置表单提交时的内容类型\nxhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded")'),n("br"),t._v("\nPOST提交的数据有一定的格式，所以需要格式话数据后才能提交")])])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("//调用Ajax函数\najax({\n\turl: '',\n\ttype: 'GET/POST',\n\tdataType: 'json',\n\tdata: {name: \"hello\",age: \"12\"},\n\tsuccess:function(response,xml){\n\t\t//请求成功后执行的代码\n\t},\n\terror: function(status){\n\t\t//请求失败后执行的代码\n\t}\n\t\n});\n\n\n//封装ajax\nfunction ajax(options){\n\toptions = options||{}\n\toptions.type = (options.type||'GET').toUpperCase()\n\toptions.dataType = options.dataType || 'json'\n\tparams = formatParams(options.data)\n\t\n\tvar xhr\n\t//非ie6\n\tif(window.XMLHttpRequest){\n\t\txhr = new XMLHttpRequest()\n\t}else{\n\t\t//ie6及以下版本浏览器\n\t\txhr = ActiveXObject('Microsoft.XMLHTTP')\n\t}\n\t\n\txhr.onreadystatechange = function(){\n\t\tif(xhr.readyState==4){\n\t\t\tvar status = xhr.status\n\t\t\tif(status>=200 && status<=300)\n\t\t\t{\n\t\t\t\toptions.success && options.success(xhr.responseText,xhr.responseXML)\n\t\t\t}else{\n\t\t\t\toptions.error&&options.error(status)\n\t\t\t}\n\t\t}\n\t}\n\t\n\tif(options.type == 'GET'){\n\t\txhr.open('GET',options.url+'?'+params,true)\n\t\txhr.send(null)\n\t}else if(options.type == 'POST'){\n\t\txhr.open('POST',options.url,true)\n\t\t//设置表单提交时的内容类型\n\t\txhr.setRequestHeader(\"Content-Type\", \"application/x-www-form-urlencoded\")\n\t\txhr.send(params)\n\t}\n}\n\n//格式化数据\nfunction formatParams(data){\n\tvar arr = [];\n\tfor(var name in data){\n\t\tarr.push(encodeURIComponent(name)+'='+encodeURIComponent(data[name]))\n\t}\n\tarr.push(('v='Math.random()).replace('.',''))\n\treturn arr.join('&')\n}\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);